{"version":3,"file":"Teams-e4b9cdfa.js","sources":["../../../../frontend/src/pages/Teams.vue"],"sourcesContent":["<template>\n  <div\n    class=\"mx-auto w-full bg-surface-white dark:bg-surface-gray-2 px-4 py-8 mt-6 w-112 rounded-2xl p-6 md:shadow-2xl flex flex-col gap-4\"\n  >\n    <div class=\"text-sm absolute top-5 right-5 flex gap-1.5 text-ink-gray-8\">\n      <LucideLogOut class=\"w-3 h-3 my-auto\" />\n      <a\n        href=\"#\"\n        @click=\"$store.dispatch('logout')\"\n      >Log out</a>\n    </div>\n    <div class=\"flex flex-col items-center\">\n      <FrappeDriveLogo class=\"inline-block h-12 w-12 rounded-md\" />\n    </div>\n\n    <h2 class=\"font-bold text-lg text-center text-ink-gray-8\">\n      Welcome, {{ $store.state.user.fullName.split(\" \")[0] }}\n    </h2>\n    <div>\n      <p class=\"font-semibold text-sm text-ink-gray-8 mb-1 ms-1\">\n        Teams\n      </p>\n      <ul class=\"flex flex-col\">\n        <template\n          v-for=\"team in Object.values(getTeams?.data)\"\n          :key=\"team.id\"\n        >\n          <router-link\n            class=\"my-auto\"\n            :to=\"{ name: 'Team', params: { team: team.name } }\"\n          >\n            <li>\n              <div\n                class=\"flex justify-between text-ink-gray-7 hover:bg-surface-gray-3 py-1.5 px-2 rounded group\"\n              >\n                <div class=\"flex flex-col\">\n                  {{ team.title }}\n                  <span class=\"text-xs text-ink-gray-6\">{{ team.users.length }} members</span>\n                </div>\n\n                <LucideFolderOpenDot\n                  class=\"size-4 self-center hidden group-hover:block\"\n                />\n              </div>\n            </li>\n          </router-link>\n        </template>\n      </ul>\n    </div>\n    <div v-if=\"getInvites?.data?.length\">\n      <p class=\"font-semibold text-sm mb-3\">\n        Invites\n      </p>\n      <li\n        v-for=\"(invite, index) in getInvites?.data\"\n        :key=\"invite.name\"\n        class=\"w-full flex justify-between mb-2 ms-1\"\n      >\n        <div class=\"flex flex-col\">\n          <span class=\"text-md\">{{ invite.team_name }}</span>\n          <span class=\"text-sm\">{{ invite.status === \"Proposed\" ? \"Requested\" : \"Sent\" }} at\n            {{ formatDate(invite.creation) }}</span>\n        </div>\n        <div class=\"flex gap-2\">\n          <Tooltip text=\"You requested an invite from this team.\">\n            <Badge\n              v-if=\"invite.status === 'Proposed'\"\n              class=\"my-auto mr-2\"\n              theme=\"orange\"\n            >\n              Requested\n            </Badge>\n          </Tooltip>\n          <Button\n            :variant=\"invite.status === 'Pending' ? 'ghost' : 'outline'\"\n            class=\"my-auto\"\n            @click=\"\n              rejectInvite.submit({ key: invite.name }),\n              getInvites.data.splice(index, 1)\n            \"\n          >\n            <LucideX\n              v-if=\"invite.status === 'Pending'\"\n              class=\"size-4\"\n            />\n            <LucideTrash\n              v-else\n              class=\"size-4\"\n            />\n          </Button>\n\n          <Button\n            v-if=\"invite.status === 'Pending'\"\n            class=\"my-auto\"\n            variant=\"outline\"\n            @click=\"\n              acceptInvite.submit(\n                { key: invite.name },\n                {\n                  onSuccess: (data) => {\n                    if (data) window.location.replace(data)\n                    else toast('Added to the team')\n                  },\n                }\n              )\n            \"\n          >\n            <LucideCheck class=\"size-4\" />\n          </Button>\n        </div>\n      </li>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { getTeams } from \"@/resources/files\"\nimport { Badge, Tooltip } from \"frappe-ui\"\nimport { getInvites, rejectInvite, acceptInvite } from \"@/resources/permissions\"\nimport { formatDate } from \"@/utils/format\"\nimport { watch } from \"vue\"\nimport LucideFolderOpenDot from \"~icons/lucide/folder-open-dot\"\nimport { useRouter } from \"vue-router\"\n\nconst router = useRouter()\ngetInvites.fetch()\n\nwatch(\n  [getInvites, getTeams],\n  ([a, b]) => {\n    if (!a.data || !b.data) return\n    if (!Object.keys(a.data).length && !Object.keys(b.data).length) {\n      router.replace({ name: \"Setup\" })\n    }\n  },\n  { immediate: true }\n)\n</script>\n"],"names":["router","useRouter","getInvites","watch","getTeams","a","b","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_LucideLogOut","_cache","$event","$store","_hoisted_3","_component_FrappeDriveLogo","_hoisted_4","_hoisted_5","_Fragment","_renderList","_unref","team","_createBlock","_component_router_link","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","LucideFolderOpenDot","_hoisted_9","invite","index","_hoisted_10","_hoisted_11","_hoisted_12","formatDate","_hoisted_13","Tooltip","Badge","_component_Button","rejectInvite","_component_LucideX","_component_LucideTrash","acceptInvite","data","window","toast","_component_LucideCheck"],"mappings":"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"}