{"version":3,"file":"Folder-4d8daf7a.js","sources":["../../../../frontend/src/pages/Folder.vue"],"sourcesContent":["<template>\n  <GenericPage\n    :verify=\"currentFolder\"\n    :get-entities=\"getFolderContents\"\n    :empty=\"{\n      icon: LucideFolderClosed,\n      title: 'No files added yet',\n    }\"\n  />\n</template>\n\n<script setup>\nimport GenericPage from \"@/components/GenericPage.vue\"\nimport { watch, computed } from \"vue\"\nimport { useStore } from \"vuex\"\nimport { createResource } from \"frappe-ui\"\nimport { COMMON_OPTIONS } from \"@/resources/files\"\nimport {\n  setBreadCrumbs,\n  prettyData,\n  setCache,\n  updateURLSlug,\n} from \"@/utils/files\"\nimport router from \"@/router\"\nimport LucideFolderClosed from \"~icons/lucide/folder-closed\"\n\nconst store = useStore()\n\nconst props = defineProps({\n  entityName: String,\n  slug: String,\n})\nstore.commit(\"setCurrentFolder\", { name: props.entityName })\n\nconst getFolderContents = createResource({\n  ...COMMON_OPTIONS,\n  url: \"drive.api.list.files\",\n  makeParams: (params) => ({\n    ...params,\n    entity_name: props.entityName,\n  }),\n  cache: [\"folder\", props.entityName],\n})\nsetCache(getFolderContents, [\"folder\", props.entityName])\n\nconst onSuccess = (entity) => {\n  if (router.currentRoute.value.params.entityName !== entity.name) return\n  document.title = \"Folder - \" + entity.title\n  setBreadCrumbs(entity)\n  updateURLSlug(entity.title)\n}\n\nconst e = computed(() => props.entityName)\nconst currentFolder = createResource({\n  url: \"drive.api.permissions.get_entity_with_permissions\",\n  transform(entity) {\n    return prettyData([entity])[0]\n  },\n  onSuccess,\n})\nstore.commit(\"setCurrentResource\", currentFolder)\nwatch(e, (v) => currentFolder.fetch({ entity_name: v }), { immediate: true })\n</script>\n"],"names":["store","useStore","props","__props","getFolderContents","createResource","COMMON_OPTIONS","params","setCache","onSuccess","entity","router","setBreadCrumbs","updateURLSlug","e","computed","currentFolder","prettyData","watch","v","_createBlock","GenericPage","_unref","LucideFolderClosed"],"mappings":"qWA0BA,MAAMA,EAAQC,EAAS,EAEjBC,EAAQC,EAIdH,EAAM,OAAO,mBAAoB,CAAE,KAAME,EAAM,UAAU,CAAE,EAE3D,MAAME,EAAoBC,EAAe,CACvC,GAAGC,EACH,IAAK,uBACL,WAAaC,IAAY,CACvB,GAAGA,EACH,YAAaL,EAAM,UACvB,GACE,MAAO,CAAC,SAAUA,EAAM,UAAU,CACpC,CAAC,EACDM,EAASJ,EAAmB,CAAC,SAAUF,EAAM,UAAU,CAAC,EAExD,MAAMO,EAAaC,GAAW,CACxBC,EAAO,aAAa,MAAM,OAAO,aAAeD,EAAO,OAC3D,SAAS,MAAQ,YAAcA,EAAO,MACtCE,EAAeF,CAAM,EACrBG,EAAcH,EAAO,KAAK,EAC5B,EAEMI,EAAIC,EAAS,IAAMb,EAAM,UAAU,EACnCc,EAAgBX,EAAe,CACnC,IAAK,oDACL,UAAUK,EAAQ,CAChB,OAAOO,EAAW,CAACP,CAAM,CAAC,EAAE,CAAC,CAC9B,EACD,UAAAD,CACF,CAAC,EACD,OAAAT,EAAM,OAAO,qBAAsBgB,CAAa,EAChDE,EAAMJ,EAAIK,GAAMH,EAAc,MAAM,CAAE,YAAaG,EAAG,EAAG,CAAE,UAAW,EAAI,CAAE,cA5D1EC,EAOEC,EAAA,CANC,OAAQC,EAAaN,CAAA,EACrB,eAAcM,EAAiBlB,CAAA,EAC/B,MAAK,MAAgBkB,EAAkBC,CAAA"}