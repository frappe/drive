import{N as B,O as r,E as N,g as u,h as t,i as l,j as c,F as f,p as g,k as a,n as m,P as x,q as h,o,c as i,w as d,l as k,H as O,Q as P,R as S,S as V,U as q,V as z,v as D,W as F,X as I,Y as R}from"./index-5693bb51.js";import{L as E}from"./folder-open-dot-0bae2b76.js";const W={class:"mx-auto w-full bg-surface-white dark:bg-surface-gray-2 px-4 py-8 mt-6 w-112 rounded-2xl p-6 md:shadow-2xl flex flex-col gap-4"},X={class:"text-sm absolute top-5 right-5 flex gap-1.5 text-ink-gray-8"},Y={class:"flex flex-col items-center"},A={class:"font-bold text-lg text-center text-ink-gray-8"},H={class:"flex flex-col"},Q={class:"flex justify-between text-ink-gray-7 hover:bg-surface-gray-3 py-1.5 px-2 rounded group"},U={class:"flex flex-col"},G={class:"text-xs text-ink-gray-6"},J={key:0},K={class:"flex flex-col"},M={class:"text-md"},Z={class:"text-sm"},ee={class:"flex gap-2"},oe={__name:"Teams",setup(te){const y=B();return r.fetch(),N([r,x],([n,s])=>{!n.data||!s.data||!Object.keys(n.data).length&&!Object.keys(s.data).length&&y.replace({name:"Setup"})},{immediate:!0}),(n,s)=>{const b=z,v=D,w=h("router-link"),L=I,C=R,_=h("Button"),$=F;return o(),u("div",W,[t("div",X,[l(b,{class:"w-3 h-3 my-auto"}),t("a",{href:"#",onClick:s[0]||(s[0]=e=>n.$store.dispatch("logout"))},"Log out")]),t("div",Y,[l(v,{class:"inline-block h-12 w-12 rounded-md"})]),t("h2",A," Welcome, "+c(n.$store.state.user.fullName.split(" ")[0]),1),t("div",null,[s[1]||(s[1]=t("p",{class:"font-semibold text-sm text-ink-gray-8 mb-1 ms-1"}," Teams ",-1)),t("ul",H,[(o(!0),u(f,null,g(Object.values(a(x)?.data),e=>(o(),i(w,{key:e.id,class:"my-auto",to:{name:"Team",params:{team:e.name}}},{default:d(()=>[t("li",null,[t("div",Q,[t("div",U,[k(c(e.title)+" ",1),t("span",G,c(e.users.length)+" members",1)]),l(a(E),{class:"size-4 self-center hidden group-hover:block"})])])]),_:2},1032,["to"]))),128))])]),a(r)?.data?.length?(o(),u("div",J,[s[3]||(s[3]=t("p",{class:"font-semibold text-sm mb-3"}," Invites ",-1)),(o(!0),u(f,null,g(a(r)?.data,(e,j)=>(o(),u("li",{key:e.name,class:"w-full flex justify-between mb-2 ms-1"},[t("div",K,[t("span",M,c(e.team_name),1),t("span",Z,c(e.status==="Proposed"?"Requested":"Sent")+" at "+c(a(O)(e.creation)),1)]),t("div",ee,[l(a(S),{text:"You requested an invite from this team."},{default:d(()=>[e.status==="Proposed"?(o(),i(a(P),{key:0,class:"my-auto mr-2",theme:"orange"},{default:d(()=>[...s[2]||(s[2]=[k(" Requested ",-1)])]),_:1})):m("",!0)]),_:2},1024),l(_,{variant:e.status==="Pending"?"ghost":"outline",class:"my-auto",onClick:T=>(a(V).submit({key:e.name}),a(r).data.splice(j,1))},{default:d(()=>[e.status==="Pending"?(o(),i(L,{key:0,class:"size-4"})):(o(),i(C,{key:1,class:"size-4"}))]),_:2},1032,["variant","onClick"]),e.status==="Pending"?(o(),i(_,{key:0,class:"my-auto",variant:"outline",onClick:T=>a(q).submit({key:e.name},{onSuccess:p=>{p?n.window.location.replace(p):n.toast("Added to the team")}})},{default:d(()=>[l($,{class:"size-4"})]),_:1},8,["onClick"])):m("",!0)])]))),128))])):m("",!0)])}}};export{oe as default};
//# sourceMappingURL=Teams-a05ffd41.js.map
