{"version":3,"file":"InsertImage-e902c224.js","sources":["../../../../frontend/node_modules/frappe-ui/src/components/TextEditor/InsertImage.vue"],"sourcesContent":["<template>\n  <slot v-bind=\"{ onClick: openFileSelector }\"></slot>\n  <input\n    ref=\"fileInput\"\n    type=\"file\"\n    class=\"hidden\"\n    @change=\"onImageSelect\"\n    accept=\"image/*\"\n    multiple\n  />\n  <ImageGroupUploadDialog\n    v-if=\"showModal\"\n    mode=\"new\"\n    v-model=\"showModal\"\n    v-model:files=\"selectedFiles\"\n    :editor=\"editor\"\n    @close=\"handleCancel\"\n  />\n</template>\n<script setup lang=\"ts\">\nimport { ref, useTemplateRef } from 'vue'\nimport type { Editor } from '@tiptap/vue-3'\nimport ImageGroupUploadDialog from './extensions/image-group/ImageGroupUploadDialog.vue'\n\nconst props = defineProps<{\n  editor: Editor\n}>()\n\nconst fileInput = useTemplateRef<HTMLInputElement>('fileInput')\nconst showModal = ref(false)\nconst selectedFiles = ref<File[]>([])\n\nfunction openFileSelector() {\n  fileInput.value?.click()\n}\n\nfunction onImageSelect(e: Event) {\n  const target = e.target as HTMLInputElement\n  const files = target.files\n  if (files && files.length > 0) {\n    if (files.length === 1) {\n      props.editor.chain().focus().uploadImage(files[0]).run()\n    } else {\n      selectedFiles.value = Array.from(files)\n      showModal.value = true\n    }\n  }\n}\n\nfunction handleCancel() {\n  showModal.value = false\n  selectedFiles.value = []\n}\n</script>\n"],"names":["props","__props","fileInput","useTemplateRef","showModal","ref","selectedFiles","openFileSelector","onImageSelect","e","files","handleCancel","_renderSlot","_ctx","_createElementVNode","_createBlock","ImageGroupUploadDialog","$event"],"mappings":"uLAwBA,MAAMA,EAAQC,EAIRC,EAAYC,EAAiC,WAAW,EACxDC,EAAYC,EAAI,EAAK,EACrBC,EAAgBD,EAAY,CAAA,CAAE,EAEpC,SAASE,GAAmB,CAC1BL,EAAU,OAAO,OACnB,CAEA,SAASM,EAAcC,EAAU,CAE/B,MAAMC,EADSD,EAAE,OACI,MACjBC,GAASA,EAAM,OAAS,IACtBA,EAAM,SAAW,EACbV,EAAA,OAAO,MAAM,EAAE,MAAM,EAAE,YAAYU,EAAM,CAAC,CAAC,EAAE,OAErCJ,EAAA,MAAQ,MAAM,KAAKI,CAAK,EACtCN,EAAU,MAAQ,IAGxB,CAEA,SAASO,GAAe,CACtBP,EAAU,MAAQ,GAClBE,EAAc,MAAQ,EACxB,6BAnDEM,EAAoDC,gCAA3BN,CAAgB,CAAA,CAAA,CAAA,EACzCO,EAOE,QAAA,SANI,YAAJ,IAAIZ,EACJ,KAAK,OACL,MAAM,SACL,SAAQM,EACT,OAAO,UACP,SAAA,EAAA,YAGMJ,EAAS,WADjBW,EAOEC,EAAA,OALA,KAAK,iBACIZ,EAAS,2CAATA,EAAS,MAAAa,GACV,MAAOX,EAAa,sCAAbA,EAAa,MAAAW,GAC3B,OAAQhB,EAAM,OACd,QAAOU,CAAA","x_google_ignoreList":[0]}