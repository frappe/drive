{"version":3,"file":"GenericPage-b5bc6a62.js","sources":["../../../../frontend/src/utils/disable-scroll.ts","../../../../frontend/src/components/ContextMenu.vue","../../../../frontend/src/components/CustomListRowItem.vue","../../../../frontend/src/components/CustomListRow.vue","../../../../frontend/src/components/ListView.vue","../../../../frontend/src/components/GridItem.vue","../../../../frontend/src/components/GridView.vue","../../../../frontend/src/components/DriveToolBar.vue","../../../../frontend/src/components/NoFilesSection.vue","../../../../frontend/src/components/ProgressRing.vue","../../../../frontend/src/components/UploadTracker.vue","../../../../frontend/src/components/GenericPage.vue"],"sourcesContent":["const canUseDOM = () =>\n  typeof window !== \"undefined\" &&\n  !!window.document &&\n  !!window.document.createElement\n\ninterface Options {\n  authorizedInInputs: number[]\n  disableKeys: boolean\n  disableScroll: boolean\n  disableWheel: boolean\n  keyboardKeys: number[]\n}\n\nclass DisableScroll {\n  element: Element | null\n  lockToScrollPos: [number, number]\n  options: Options\n\n  constructor() {\n    this.element = null\n    this.lockToScrollPos = [0, 0]\n    this.options = {\n      authorizedInInputs: [32, 37, 38, 39, 40],\n      disableKeys: true,\n      disableScroll: true,\n      disableWheel: true,\n      keyboardKeys: [32, 33, 34, 35, 36, 37, 38, 39, 40],\n      // space: 32, page up: 33, page down: 34, end: 35, home: 36\n      // left: 37, up: 38, right: 39, down: 40\n    }\n\n    /* istanbul ignore else */\n    if (canUseDOM()) {\n      this.element = document.scrollingElement\n    }\n  }\n\n  /**\n   * Disable Page Scroll\n   */\n  on(element?: Element, options?: Partial<Options>) {\n    if (!canUseDOM()) return\n\n    this.element = element || this.element\n    this.options = {\n      ...this.options,\n      ...options,\n    }\n\n    const { disableKeys, disableScroll, disableWheel } = this.options\n\n    /* istanbul ignore else */\n    if (disableWheel) {\n      document.addEventListener(\"wheel\", this.handleWheel, { passive: false })\n      document.addEventListener(\"touchmove\", this.handleWheel, {\n        passive: false,\n      })\n    }\n\n    /* istanbul ignore else */\n    if (disableScroll) {\n      this.lockToScrollPos = [\n        this.element?.scrollLeft ?? 0,\n        this.element?.scrollTop ?? 0,\n      ]\n      document.addEventListener(\"scroll\", this.handleScroll, {\n        passive: false,\n      })\n    }\n\n    /* istanbul ignore else */\n    if (disableKeys) {\n      document.addEventListener(\"keydown\", this.handleKeydown, {\n        passive: false,\n      })\n    }\n  }\n\n  /**\n   * Re-enable page scrolls\n   */\n  off() {\n    if (!canUseDOM()) return\n\n    document.removeEventListener(\"wheel\", this.handleWheel)\n    document.removeEventListener(\"touchmove\", this.handleWheel)\n    document.removeEventListener(\"scroll\", this.handleScroll)\n    document.removeEventListener(\"keydown\", this.handleKeydown)\n  }\n\n  handleWheel = (e: WheelEvent | TouchEvent) => {\n    e.preventDefault()\n  }\n\n  handleScroll = () => {\n    window.scrollTo(...this.lockToScrollPos)\n  }\n\n  handleKeydown = (e: KeyboardEvent) => {\n    let keys = this.options.keyboardKeys\n\n    /* istanbul ignore else */\n    if (\n      [\"INPUT\", \"TEXTAREA\"].includes(\n        (e.target as HTMLInputElement | HTMLTextAreaElement).tagName\n      )\n    ) {\n      keys = keys.filter(\n        (key) => !this.options.authorizedInInputs.includes(key)\n      )\n    }\n\n    /* istanbul ignore else */\n    if (keys.includes(e.keyCode)) {\n      e.preventDefault()\n    }\n  }\n}\n\nexport default new DisableScroll()\n","<template>\n  <div\n    v-if=\"actionItems.length > 0\"\n    ref=\"contextMenu\"\n    class=\"w-[208px] p-1.5 fixed mt-2 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none\"\n    :style=\"{\n      left: `${calculateX}px`,\n      top: `${calculateY}px`,\n      'z-index': 1000,\n    }\"\n  >\n    <div\n      v-for=\"(item, index) in actionItems\"\n      :key=\"index\"\n      @click=\"\n        () => {\n          item.handler()\n          close()\n        }\n      \"\n    >\n      <div v-if=\"item.divider\">\n        <hr class=\"my-1 bg-surface-gray-4\">\n      </div>\n      <button\n        v-else\n        class=\"group flex h-7 w-full items-center rounded px-2 text-base hover:bg-surface-gray-3 text-ink-gray-6\"\n      >\n        <component\n          :is=\"item.icon\"\n          class=\"mr-2 size-4 flex-shrink-0\"\n          :class=\"item.theme ? 'text-[#E03636]' : 'text-ink-gray-7'\"\n        />\n        <span\n          class=\"whitespace-nowrap\"\n          :class=\"item.theme ? 'text-ink-red-4' : 'text-ink-gray-7'\"\n        >\n          {{ item.label }}\n        </span>\n      </button>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { onBeforeUnmount, onMounted, onUpdated, ref } from \"vue\"\nimport disableScroll from \"@/utils/disable-scroll\"\n\nconst props = defineProps({\n  actionItems: Array,\n  event: Object,\n  close: Function,\n})\nconst contextMenu = ref(null)\nconst parentWidth = ref(null)\nconst parentHeight = ref(null)\nconst childWidth = ref(null)\nconst childHeight = ref(null)\n\nonMounted(() => {\n  parentWidth.value = window.document.body.clientWidth\n  parentHeight.value = window.document.body.clientHeight\n  childWidth.value = contextMenu.value.clientWidth\n  childHeight.value = contextMenu.value.clientHeight\n  calculateY()\n  calculateX()\n  disableScroll.on()\n})\n\nonUpdated(() => {\n  calculateY()\n  calculateX()\n})\n\nonBeforeUnmount(() => {\n  disableScroll.off()\n})\n\nfunction calculateY() {\n  if (props.event.y >= parentHeight.value - childHeight.value) {\n    return (contextMenu.value.style.top =\n      props.event.y - childHeight.value + \"px\")\n  } else {\n    return (contextMenu.value.style.top = props.event.y + \"px\")\n  }\n}\nfunction calculateX() {\n  if (props.event.x >= parentWidth.value - childWidth.value) {\n    return (contextMenu.value.style.left =\n      props.event.x - childWidth.value + \"px\")\n  } else {\n    return (contextMenu.value.style.left = props.event.x + \"px\")\n  }\n}\n</script>\n","<template>\n  <ListRowItem\n    :column=\"column\"\n    :row=\"row\"\n    :item=\"item\"\n    :align=\"column.align\"\n  >\n    <template\n      v-if=\"column.key === 'title'\"\n      #prefix\n    >\n      <img\n        v-if=\"!imgLoaded\"\n        loading=\"lazy\"\n        class=\"h-[16px] w-[16px] rounded-sm\"\n        :src=\"backupLink\"\n        :draggable=\"false\"\n      >\n      <img\n        v-show=\"imgLoaded\"\n        class=\"h-[16px] w-[16px] object-cover rounded-sm\"\n        :src=\"src\"\n        :draggable=\"false\"\n        @error=\"src = backupLink\"\n        @load=\"imgLoaded = true\"\n      >\n    </template>\n    <template #default=\"{ label }\">\n      <div\n        :key=\"label\"\n        class=\"truncate text-base\"\n      >\n        {{ column?.getLabel ? column.getLabel({ row }) : label }}\n      </div>\n\n      <Button\n        v-if=\"column.key === 'options' && contextMenu\"\n        class=\"!bg-inherit\"\n        @click=\"(e) => contextMenu(e, row)\"\n      >\n        <LucideMoreHorizontal class=\"size-4\" />\n      </Button>\n    </template>\n    <template\n      v-if=\"idx === 0\"\n      #suffix\n    >\n      <div class=\"flex flex-row grow justify-end gap-2 w-[20px]\">\n        <component\n          :is=\"column.suffix({ row })\"\n          v-if=\"column.suffix\"\n        />\n        <LucideStar\n          v-if=\"row.is_favourite && $route.name !== 'Favourites'\"\n          name=\"star\"\n          width=\"16\"\n          height=\"16\"\n          class=\"my-auto stroke-amber-500 fill-amber-500\"\n        />\n      </div>\n    </template>\n  </ListRowItem>\n</template>\n<script setup>\nimport { ListRowItem } from \"frappe-ui\"\nimport { ref } from \"vue\"\n\nconst props = defineProps({\n  idx: Number,\n  column: Object,\n  row: Object,\n  item: String,\n  contextMenu: Function,\n})\n\nlet src, imgLoaded, thumbnailLink, backupLink, _\n\nif (props.column.prefix && props.column.key === \"title\") {\n  ;[thumbnailLink, backupLink, _] = props.column.prefix({\n    row: props.row,\n  })\n\n  src = ref(thumbnailLink || backupLink)\n  imgLoaded = ref(false)\n}\n</script>\n","<template>\n  <template\n    v-for=\"row in rows\"\n    :key=\"row.name\"\n  >\n    <ListRow\n      :row=\"row\"\n      class=\"group\"\n      :class=\"[\n        row.name === selectedName || selections.has(row.name)\n          ? 'bg-surface-gray-2 hover:!bg-surface-gray-3'\n          : 'bg-surface-white',\n        draggedItem === row.name ? 'opacity-60 hover:shadow-none' : '',\n      ]\"\n      :draggable=\"true\"\n      @contextmenu=\"(e) => !selections.size && contextMenu(e, row)\"\n      @[action]=\"!selections.size && open(row)\"\n      @dragstart=\"draggedItem = row.name\"\n      @dragend=\"draggedItem = null\"\n      @dragover=\"row.is_group && $event.preventDefault()\"\n      @drop=\"$emit('dropped', row, draggedItem)\"\n    >\n      <template #default=\"{ idx, column, item }\">\n        <CustomListRowItem\n          :column=\"column\"\n          :row=\"row\"\n          :item=\"item\"\n          :idx=\"idx\"\n          :context-menu=\"!selections.size && contextMenu\"\n        />\n      </template>\n    </ListRow>\n  </template>\n</template>\n<script setup>\nimport { ListRow } from \"frappe-ui\"\nimport CustomListRowItem from \"./CustomListRowItem.vue\"\nimport { openEntity } from \"@/utils/files\"\nimport { settings } from \"@/resources/permissions\"\nimport { useRoute } from \"vue-router\"\nimport { useStore } from \"vuex\"\nimport { computed, ref } from \"vue\"\n\ndefineProps({\n  rows: Array,\n  contextMenu: Function,\n  selections: Set,\n})\ndefineEmits([\"dropped\"])\n\nconst draggedItem = ref()\n\nconst route = useRoute()\nconst store = useStore()\nconst action = computed(() =>\n  settings.data?.single_click ? \"click\" : \"dblclick\"\n)\n\n// Used as right-click doesn't trigger active in frappe-ui\nconst selectedName = computed(() => store.state.activeEntity?.name)\nconst open = (row) => route.name !== \"Trash\" && openEntity(row)\n</script>\n","<template>\n  <FrappeListView\n    ref=\"container\"\n    class=\"relative select-none p-5 md:pb-15\"\n    row-key=\"name\"\n    :columns=\"selectedColumns\"\n    :rows=\"formattedRows\"\n    :options=\"{\n      selectable: true,\n      enableActive: true,\n      showTooltip: true,\n      resizeColumn: false,\n      // Should be getLink(row, false, false) - but messes up clicking\n      getRowRoute: () => '',\n      emptyState: {\n        description: 'Nothing found - try something else?',\n      },\n    }\"\n    @update:selections=\"handleSelections\"\n    @update:active-row=\"setActive\"\n  >\n    <ListHeader class=\"mb-[1px]\" />\n    <div\n      v-if=\"!folderContents\"\n      class=\"w-full text-center flex items-center justify-center py-10\"\n    >\n      <LoadingIndicator class=\"w-8\" />\n    </div>\n    <template v-else>\n      <div class=\"h-full overflow-y-auto\">\n        <ListEmptyState v-if=\"!formattedRows.length\" />\n        <div\n          v-for=\"group in formattedRows\"\n          v-else-if=\"formattedRows[0].group\"\n          :key=\"group.group\"\n        >\n          <ListGroupHeader :group=\"group\">\n            <slot\n              v-if=\"$slots['group-header']\"\n              name=\"group-header\"\n              v-bind=\"{ group }\"\n            />\n          </ListGroupHeader>\n          <ListGroupRows :group=\"group\">\n            <CustomListRow\n              :rows=\"group.rows\"\n              :context-menu=\"contextMenu\"\n              :selections\n              @dropped=\"emit('dropped')\"\n            />\n          </ListGroupRows>\n        </div>\n        <div\n          v-else\n          class=\"pb-8\"\n        >\n          <CustomListRow\n            :rows=\"formattedRows\"\n            :context-menu=\"contextMenu\"\n            :selections\n            @dropped=\"(...p) => $emit('dropped', ...p)\"\n          />\n        </div>\n      </div>\n    </template>\n  </FrappeListView>\n  <ContextMenu\n    v-if=\"rowEvent && selectedRow\"\n    :key=\"selectedRow.name\"\n    v-on-outside-click=\"() => (rowEvent = false)\"\n    :close=\"() => (rowEvent = false)\"\n    :action-items=\"dropdownActionItems(selectedRow)\"\n    :event=\"rowEvent\"\n  />\n</template>\n<script setup>\nimport {\n  ListHeader,\n  ListGroupRows,\n  ListGroupHeader,\n  ListEmptyState,\n  LoadingIndicator,\n  ListView as FrappeListView,\n  Avatar,\n} from \"frappe-ui\"\nimport { getThumbnailUrl } from \"@/utils/getIconUrl\"\nimport { useStore } from \"vuex\"\nimport { useRoute } from \"vue-router\"\nimport { computed, h, ref, watch, useTemplateRef } from \"vue\"\nimport ContextMenu from \"@/components/ContextMenu.vue\"\nimport CustomListRow from \"./CustomListRow.vue\"\nimport { openEntity } from \"@/utils/files\"\nimport { formatDate } from \"@/utils/format\"\n\nimport { onKeyDown } from \"@vueuse/core\"\nimport emitter from \"@/emitter\"\nimport LucideBuilding2 from \"~icons/lucide/building-2\"\nimport LucideUsers from \"~icons/lucide/users\"\nimport LucideGlobe2 from \"~icons/lucide/globe-2\"\n\nconst store = useStore()\nconst route = useRoute()\nconst props = defineProps({\n  folderContents: Object,\n  actionItems: Array,\n  userData: Object,\n  rootEntity: Object,\n})\nconst emit = defineEmits([\"dropped\"])\n\nconst container = useTemplateRef(\"container\")\nconst selections = defineModel(new Set())\nconst selectedRow = ref(null)\n\nconst rowEvent = ref(null)\n\nconst formattedRows = computed(() => {\n  if (!props.folderContents) return []\n  if (Array.isArray(props.folderContents)) return props.folderContents\n  return Object.keys(props.folderContents)\n    .map((k) => ({\n      group: k,\n      rows: props.folderContents[k] || [],\n      collapsed: false,\n    }))\n    .filter((g) => g.rows.length)\n})\n\nconst selectedColumns = [\n  {\n    label: __(\"Name\"),\n    key: \"title\",\n    getLabel: ({ row: { title, is_group, document } }) =>\n      title.lastIndexOf(\".\") === -1 || is_group || document\n        ? title\n        : title.slice(0, title.lastIndexOf(\".\")),\n    getTooltip: (e) => (e.is_group || e.document ? \"\" : e.title),\n    prefix: ({ row }) => {\n      return getThumbnailUrl(row)\n    },\n    suffix: ({ row }) => {\n      if (row.share_count === props.rootEntity?.share_count) return\n      if (row.share_count === -2) return h(LucideGlobe2, { class: \"size-4\" })\n      else if (row.share_count === -1)\n        return h(LucideBuilding2, { class: \"size-4\" })\n      else if (row.share_count > 0) return h(LucideUsers, { class: \"size-4\" })\n    },\n  },\n  {\n    label: __(\"Owner\"),\n    key: \"\",\n    getLabel: ({ row }) =>\n      row.owner === store.state.user.id\n        ? \"You\"\n        : props.userData[row.owner]?.full_name || row.owner,\n    prefix: ({ row }) => {\n      return h(Avatar, {\n        shape: \"circle\",\n        image: props.userData[row.owner]?.user_image,\n        label:\n          props.userData[row.owner]?.full_name ||\n          props.userData[row.owner]?.email ||\n          row.owner,\n        size: \"sm\",\n      })\n    },\n    width: \"10%\",\n  },\n  {\n    label: __(\"Last Modified\"),\n    getLabel: ({ row }) => row.relativeModified,\n    getTooltip: (row) => formatDate(row.modified),\n    key: \"modified\",\n    isEnabled: (n) => n !== \"Recents\",\n    width: \"15%\",\n  },\n  {\n    label: __(\"Last Accessed\"),\n    getLabel: ({ row }) => row.relativeAccessed,\n    getTooltip: (row) => formatDate(row.accessed),\n    key: \"modified\",\n    isEnabled: (n) => n === \"Recents\",\n    width: \"15%\",\n  },\n  {\n    label: __(\"Size\"),\n    key: \"\",\n    getLabel: ({ row }) =>\n      row.is_group\n        ? row.children\n          ? row.children + \" item\" + (row.children === 1 ? \"\" : \"s\")\n          : \"empty\"\n        : row.file_size_pretty || \"-\",\n    width: \"8%\",\n  },\n  { label: \"\", key: \"options\", align: \"right\", width: \"5%\" },\n].filter((k) => !k.isEnabled || k.isEnabled(route.name))\n\nconst setActive = (entityName) => {\n  const entity = props.folderContents.find((k) => k.name === entityName)\n  selectedRow.value =\n    !entity || entity.name !== store.state.activeEntity?.name ? entity : null\n}\n\nwatch(selectedRow, (k) => {\n  store.commit(\"setActiveEntity\", k)\n})\nconst dropdownActionItems = (row) => {\n  if (!row) return []\n  return props.actionItems\n    .filter((a) => !a.isEnabled || a.isEnabled(row))\n    .map((a) => ({\n      ...a,\n      handler: () => {\n        rowEvent.value = false\n        store.commit(\"setActiveEntity\", row)\n        a.action([row])\n      },\n    }))\n}\n\nconst contextMenu = (event, row) => {\n  if (selections.value.size > 0) return\n  // Ctrl + click triggers context menu on Mac\n  if (event.ctrlKey) openEntity(row, true)\n  rowEvent.value = event\n  selectedRow.value = row\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nconst handleSelections = (sels) => {\n  selections.value = sels\n  selectedRow.value = null\n  store.commit(\"setActiveEntity\", null)\n}\n\n// Add keyboard shortcuts here as f-ui selections has to be mutated\nonKeyDown(\"a\", (e) => {\n  // How do I do this nicely?\n  if (\n    e.target.classList.contains(\"ProseMirror\") ||\n    e.target.tagName === \"INPUT\" ||\n    e.target.tagName === \"TEXTAREA\"\n  )\n    return\n  if (e.metaKey) {\n    container.value.selections.clear()\n    props.folderContents.map((k) => container.value.selections.add(k.name))\n    e.preventDefault()\n  }\n})\nonKeyDown(\"Backspace\", (e) => {\n  if (\n    e.target.classList.contains(\"ProseMirror\") ||\n    e.target.tagName === \"INPUT\" ||\n    e.target.tagName === \"TEXTAREA\"\n  )\n    return\n  if (e.metaKey) emitter.emit(\"remove\")\n})\nonKeyDown(\"m\", (e) => {\n  if (\n    e.target.classList.contains(\"ProseMirror\") ||\n    e.target.tagName === \"INPUT\" ||\n    e.target.tagName === \"TEXTAREA\"\n  )\n    return\n  if (e.ctrlKey) emitter.emit(\"move\")\n})\nonKeyDown(\"Escape\", (e) => {\n  if (\n    e.target.classList.contains(\"ProseMirror\") ||\n    e.target.tagName === \"INPUT\" ||\n    e.target.tagName === \"TEXTAREA\"\n  )\n    return\n  container.value.selections.clear()\n  e.preventDefault()\n})\n</script>\n","<template>\n  <div\n    class=\"h-[65%] flex items-center justify-center rounded-t-[calc(theme(borderRadius.lg)-1px)] overflow-hidden\"\n  >\n    <template v-if=\"is_image || !getThumbnail?.data\">\n      <img\n        v-show=\"!imgLoaded\"\n        loading=\"lazy\"\n        :class=\"'h-10 w-auto'\"\n        :src=\"backupLink\"\n        :draggable=\"false\"\n      >\n      <img\n        v-show=\"imgLoaded\"\n        :class=\"\n          src === backupLink\n            ? 'h-10 w-auto'\n            : 'h-full min-w-full object-cover rounded-t-[calc(theme(borderRadius.lg)-1px)]'\n        \"\n        :src=\"src\"\n        :draggable=\"false\"\n        @load=\"imgLoaded = true\"\n      >\n    </template>\n    <!-- Direct padding doesn't work -->\n    <div\n      v-else\n      class=\"overflow-hidden text-ellipsis whitespace-nowrap h-full w-[calc(100%-1rem)] object-cover rounded-t-[calc(theme(borderRadius.lg)-1px)] py-2\"\n    >\n      <div\n        class=\"prose prose-sm pointer-events-none scale-[.39] ml-0 origin-top-left\"\n        v-html=\"getThumbnail.data\"\n      />\n    </div>\n  </div>\n  <div\n    class=\"p-2 h-[35%] border-t border-gray-100 flex flex-col justify-evenly\"\n  >\n    <div class=\"truncate w-full w-fit text-base font-medium text-ink-gray-8\">\n      {{ file.title }}\n    </div>\n    <div class=\"mt-[5px] text-xs text-ink-gray-5\">\n      <div class=\"flex items-center justify-start gap-1\">\n        <img\n          v-if=\"\n            file.file_type !== 'Unknown' &&\n              !file.is_group &&\n              ((imgLoaded && src !== backupLink) || !is_image)\n          \"\n          loading=\"lazy\"\n          class=\"h-4 w-auto\"\n          :src=\"getIconUrl(file.file_type) || '/drive'\"\n          :draggable=\"false\"\n        >\n        <p class=\"truncate\">\n          {{ file.is_group ? childrenSentence + \"∙\" : \"\" }}\n          {{ file.file_type !== \"Unknown\" ? file.file_type + \"∙\" : \"\" }}\n          {{ file.relativeModified }}\n        </p>\n      </div>\n      <!-- <p class=\"mt-1\">\n        {{ file.file_size_pretty }}\n      </p> -->\n    </div>\n  </div>\n</template>\n<script setup>\nimport { getIconUrl, getThumbnailUrl } from \"@/utils/getIconUrl\"\nimport { createResource } from \"frappe-ui\"\nimport { ref, computed } from \"vue\"\nconst props = defineProps({ file: Object })\n\nconst [thumbnailLink, backupLink, is_image] = getThumbnailUrl(props.file)\nconst src = ref(thumbnailLink || backupLink)\nconst imgLoaded = ref(false)\n\nlet getThumbnail\nif (!is_image) {\n  getThumbnail = createResource({\n    url: thumbnailLink,\n    cache: [\"thumbnail\", props.file.name],\n    auto: true,\n  })\n}\n\nconst childrenSentence = computed(() => {\n  if (!props.file.children) return \"Empty\"\n  return props.file.children + \" item\" + (props.file.children === 1 ? \"\" : \"s\")\n})\n</script>\n","<template>\n  <!-- pt-1 to accomodate borders -->\n  <div\n    v-if=\"rows?.length\"\n    class=\"grid-container gap-5 p-5 pb-[60px] overflow-auto select-none\"\n  >\n    <div\n      v-for=\"file in rows\"\n      :id=\"file.name\"\n      :key=\"file.name\"\n      class=\"grid-item rounded-lg group select-none entity cursor-pointer relative h-[172px] border bg-surface-white\"\n      :class=\"[\n        selections.has(file.name) || selectedRow?.name === file.name\n          ? 'bg-surface-gray-2 shadow-gray'\n          : 'border-outline-gray-modals hover:shadow-lg',\n        draggedItem === file.name ? 'opacity-60 hover:shadow-none' : '',\n      ]\"\n      :draggable=\"true\"\n      @dragstart=\"draggedItem = file.name\"\n      @dragend=\"draggedItem = null\"\n      @dragover=\"file.is_group && $event.preventDefault()\"\n      @drop=\"$emit('dropped', file, draggedItem)\"\n      @click.meta=\"\n        selections.has(file.name)\n          ? selections.delete(file.name)\n          : selections.add(file.name)\n      \"\n      @[action]=\"open(file)\"\n      @contextmenu=\"contextMenu($event, file)\"\n      @mousedown.stop\n    >\n      <LucideStar\n        v-if=\"$route.name !== 'Favourites' && file.is_favourite\"\n        class=\"stroke-amber-500 fill-amber-500 absolute top-2 left-2 h-4\"\n        width=\"16\"\n        height=\"16\"\n      />\n      <Button\n        :variant=\"'subtle'\"\n        class=\"duration-300 absolute top-2 right-2\"\n        :class=\"[\n          selections.size > 0 ? '' : '!bg-surface-gray-3 hover:shadow-lg',\n          selectedRow?.name === file.name\n            ? ''\n            : 'invisible group-hover:visible',\n        ]\"\n        @click.stop=\"contextMenu($event, file)\"\n      >\n        <LucideMoreHorizontal class=\"size-4\" />\n      </Button>\n      <GridItem :file=\"file\" />\n    </div>\n  </div>\n  <ContextMenu\n    v-if=\"rowEvent && selectedRow\"\n    :key=\"selectedRow.name\"\n    v-on-outside-click=\"() => ((rowEvent = false), (selectedRow = null))\"\n    :close=\"() => ((rowEvent = false), (selectedRow = null))\"\n    :action-items=\"dropdownActionItems(selectedRow)\"\n    :event=\"rowEvent\"\n  />\n</template>\n\n<script setup>\nimport GridItem from \"@/components/GridItem.vue\"\nimport emitter from \"@/emitter\"\nimport { Button } from \"frappe-ui\"\nimport { ref, computed } from \"vue\"\nimport { openEntity } from \"@/utils/files\"\nimport { useRoute } from \"vue-router\"\nimport { useStore } from \"vuex\"\nimport { settings } from \"@/resources/permissions\"\nimport { onKeyDown } from \"@vueuse/core\"\n\nconst props = defineProps({\n  folderContents: Object,\n  actionItems: Array,\n  userData: Object,\n})\ndefineEmits([\"dropped\"])\nconst route = useRoute()\nconst store = useStore()\nconst selections = defineModel(new Set())\n\nconst rows = computed(() => props.folderContents)\nconst action = (settings.data?.message || settings.data)?.single_click\n  ? \"click\"\n  : \"dblclick\"\n\nconst selectedRow = ref(null)\nconst rowEvent = ref(null)\n\n// Duplication, redesign\nconst contextMenu = (event, row) => {\n  if (selections.value.size > 0) return\n  // Ctrl + click triggers context menu on Mac\n  if (event.ctrlKey) openEntity(row, true)\n  rowEvent.value = event\n  selectedRow.value = row\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nconst dropdownActionItems = (row) => {\n  if (!row) return []\n  return props.actionItems\n    .filter((a) => !a.isEnabled || a.isEnabled(row))\n    .map((a) => ({\n      ...a,\n      handler: () => {\n        rowEvent.value = false\n        store.commit(\"setActiveEntity\", row)\n        a.action([row])\n      },\n    }))\n}\nconst open = (row) =>\n  !selections.value.size && route.name !== \"Trash\" && openEntity(row)\n\nconst draggedItem = ref(null)\n\nonKeyDown(\"a\", (e) => {\n  if (\n    e.target.classList.contains(\"ProseMirror\") ||\n    e.target.tagName === \"INPUT\" ||\n    e.target.tagName === \"TEXTAREA\"\n  )\n    return\n  if (e.metaKey) {\n    selections.value = new Set(props.folderContents.map((k) => k.name))\n    e.preventDefault()\n  }\n})\nonKeyDown(\"Backspace\", (e) => {\n  if (\n    e.target.classList.contains(\"ProseMirror\") ||\n    e.target.tagName === \"INPUT\" ||\n    e.target.tagName === \"TEXTAREA\"\n  )\n    return\n  if (e.metaKey) emitter.emit(\"remove\")\n})\nonKeyDown(\"m\", (e) => {\n  if (\n    e.target.classList.contains(\"ProseMirror\") ||\n    e.target.tagName === \"INPUT\" ||\n    e.target.tagName === \"TEXTAREA\"\n  )\n    return\n  if (e.ctrlKey) emitter.emit(\"move\")\n})\nonKeyDown(\"Escape\", (e) => {\n  if (\n    e.target.classList.contains(\"ProseMirror\") ||\n    e.target.tagName === \"INPUT\" ||\n    e.target.tagName === \"TEXTAREA\"\n  )\n    return\n  selections.value = new Set()\n  e.preventDefault()\n})\n</script>\n<style scoped>\n@import url(\"./DocEditor/editor.css\");\n\n.grid-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));\n  grid-auto-columns: minmax(170px, 1fr);\n}\n\n.shadow-gray {\n  box-shadow: 0px 0px 0px 2px rgb(161, 159, 159);\n}\n</style>\n","<template>\n  <div class=\"flex p-5 pb-0 h-12\">\n    <div\n      v-if=\"selections?.length\"\n      class=\"my-auto w-[40%] text-base text-ink-gray-8\"\n    >\n      {{ selections.length }}\n      {{ selections.length === 1 ? __(\"item\") : __(\"items\") }}\n      {{ __(\"selected\") }}\n    </div>\n    <div\n      v-else-if=\"$route.name === 'Shared'\"\n      class=\"bg-surface-gray-2 rounded-[10px] space-x-0.5 h-7 flex items-center px-0.5 mr-4 py-1\"\n    >\n      <TabButtons\n        v-model=\"shareView\"\n        :buttons=\"[\n          {\n            label: __('By'),\n            value: 'by',\n            onClick: () => {\n              store.commit('toggleShareView', 'by')\n            },\n          },\n          {\n            label: __('With you'),\n            value: 'with',\n            onClick: () => {\n              store.commit('toggleShareView', 'with')\n            },\n          },\n        ]\"\n      />\n    </div>\n    <TextInput\n      ref=\"search-input\"\n      v-model=\"search\"\n      :disabled\n      :class=\"selections.length ? 'hidden' : 'block'\"\n      :placeholder=\"__('Find')\"\n      class=\"w-[30%]\"\n    >\n      <template #prefix>\n        <LucideSearch class=\"size-4\" />\n      </template>\n    </TextInput>\n\n    <div class=\"flex gap-2 ml-auto my-auto\">\n      <template v-if=\"!selections?.length\">\n        <div\n          v-if=\"activeFilters.length\"\n          class=\"flex flex-wrap items-start justify-end gap-1 ml-3\"\n        >\n          <div\n            v-for=\"({ icon, name }, index) in activeFilters\"\n            :key=\"index\"\n          >\n            <div\n              class=\"flex items-center border rounded pl-2 py-1 h-7 text-base select-none\"\n            >\n              <img :src=\"icon\">\n              <span class=\"text-sm ml-2\">{{ name }}</span>\n              <Button\n                variant=\"minimal\"\n                :icon=\"h(LucideX, { class: 'size-3' })\"\n                @click=\"activeFilters.splice(index, 1)\"\n              />\n            </div>\n          </div>\n        </div>\n        <Button\n          v-if=\"getEntities.loading\"\n          :loading=\"true\"\n          label=\"Loading...\"\n        />\n        <TeamSelector\n          v-if=\"\n            ['Shared', 'Recents', 'Favourites', 'Trash'].includes($route.name)\n          \"\n          v-model=\"team\"\n          :none=\"true\"\n        />\n        <Dropdown\n          :options=\"\n            availableFilterTypes.map(({ name, icon }) => ({\n              label: __(name),\n              icon: h('img', { src: icon }),\n              onClick: () => activeFilters.push({ name, icon }),\n              disabled: activeFilters.includes({ name, icon }),\n            }))\n          \"\n          :button=\"{\n            icon: LucideFilter,\n            tooltip: 'Filter',\n          }\"\n          :disabled\n          placement=\"right\"\n        />\n        <Dropdown\n          v-if=\"$route.name !== 'Recents'\"\n          :options=\"orderByItems\"\n          placement=\"right\"\n        >\n          <div class=\"flex items-center whitespace-nowrap\">\n            <Button\n              class=\"text-sm h-7 border-r border-slate-200 rounded-r-none\"\n              :disabled\n              @click.stop=\"toggleAscending\"\n            >\n              <template #icon>\n                <LucideArrowDownAz\n                  v-if=\"sortOrder.ascending\"\n                  class=\"size-4\"\n                />\n                <LucideArrowUpZa\n                  v-else\n                  class=\"size-4\"\n                />\n              </template>\n            </Button>\n\n            <Button\n              class=\"text-sm h-7 rounded-l-none flex-1\"\n              :disabled\n            >\n              <div class=\"flex items-center gap-2\">\n                {{ __(sortOrder.label) }}\n                <template v-if=\"sortOrder.smart\">\n                  <LucideSparkles class=\"size-3\" />\n                </template>\n              </div>\n            </Button>\n          </div>\n        </Dropdown>\n\n        <TabButtons\n          v-model=\"viewState\"\n          :buttons=\"[\n            {\n              icon: 'grid',\n              value: 'grid',\n              disabled,\n            },\n            {\n              icon: 'list',\n              value: 'list',\n              disabled,\n            },\n          ]\"\n        />\n      </template>\n      <div\n        v-else-if=\"actionItems\"\n        class=\"flex gap-3 ml-4 overflow-auto\"\n      >\n        <template\n          v-for=\"item in actionItems\n            .filter((i) => i.important && (selections.length === 1 || i.multi))\n            .filter(\n              (i) =>\n                !i.isEnabled ||\n                selections.every((e) => i.isEnabled(e, selections.length !== 1))\n            )\"\n          :key=\"item.label\"\n        >\n          <Button\n            variant=\"outline\"\n            :tooltip=\"item.label\"\n            size=\"md\"\n            @click.once=\"item.action(selections)\"\n          >\n            <template #icon>\n              <component\n                :is=\"item.icon\"\n                class=\"size-4 text-ink-gray-6\"\n                :class=\"[item.class, item.theme ? 'text-ink-red-3' : '']\"\n              />\n            </template>\n          </Button>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { Button, Dropdown, TextInput, TabButtons, Switch } from \"frappe-ui\"\nimport { ref, computed, watch, useTemplateRef, h, defineComponent } from \"vue\"\nimport { getIconUrl } from \"@/utils/getIconUrl\"\nimport { useStore } from \"vuex\"\nimport { onKeyDown } from \"@vueuse/core\"\nimport LucideFilter from \"~icons/lucide/filter\"\nimport TeamSelector from \"@/components/TeamSelector.vue\"\n\nimport LucideX from \"~icons/lucide/x\"\n\nconst sortOrder = defineModel(\"sortOrder\")\nconst search = defineModel(\"search\")\nconst team = defineModel(\"team\")\nconst props = defineProps({\n  selections: Array,\n  actionItems: Array,\n  getEntities: Object,\n})\nconst store = useStore()\n\nconst activeFilters = defineModel(\"filters\")\nconst disabled = computed(() => !props.getEntities.data?.length)\n\nconst viewState = ref(store.state.view)\nwatch(viewState, (val) => store.commit(\"toggleView\", val))\nconst shareView = ref(store.state.shareView)\nconst searchInput = useTemplateRef(\"search-input\")\n\nconst availableFilterTypes = computed(() => {\n  if (!props.getEntities.data) return []\n  const types = new Set(props.getEntities.data.map((r) => r.file_type))\n  if (props.getEntities.data.find((k) => k.is_group)) types.add(\"Folder\")\n  return Array.from(types)\n    .sort((a, b) => (a > b ? 1 : -1))\n    .map((t) => ({ name: t, icon: getIconUrl(t) }))\n})\n\nonKeyDown(\"Escape\", () => {\n  searchInput.value.el.blur()\n  search.value = \"\"\n})\n\nconst orderByItems = computed(() => {\n  return columnHeaders.map((header) => ({\n    ...header,\n    onClick: () => {\n      sortOrder.value.field = header.field\n      sortOrder.value.label = header.label\n    },\n  }))\n})\nconst toggleAscending = () => {\n  sortOrder.value.ascending = !sortOrder.value.ascending\n}\n\nconst columnHeaders = [\n  {\n    label: __(\"Name\"),\n    field: \"title\",\n  },\n  {\n    label: __(\"Owner\"),\n    field: \"owner\",\n  },\n  {\n    label: __(\"Modified\"),\n    field: \"modified\",\n  },\n  {\n    label: __(\"Size\"),\n    field: \"file_size\",\n  },\n  {\n    label: __(\"Type\"),\n    field: \"mime_type\",\n  },\n  {\n    group: true,\n    hideLabel: true,\n    items: [\n      {\n        component: defineComponent({\n          setup() {\n            return () =>\n              h(Switch, {\n                label: __(\"Smart\"),\n                disabled: sortOrder.value.field !== \"title\",\n                modelValue: sortOrder.value.smart,\n                \"onUpdate:modelValue\": (val) => (sortOrder.value.smart = val),\n              })\n          },\n        }),\n      },\n    ],\n  },\n]\n</script>\n","<template>\n  <div\n    class=\"flex flex-col items-center m-auto gap-4\"\n    style=\"transform: translate(0, -88.5px)\"\n  >\n    <div class=\"flex flex-col items-center gap-2\">\n      <div v-if=\"icon\">\n        <component\n          :is=\"icon\"\n          class=\"size-10 text-ink-gray-5\"\n        />\n      </div>\n      <p class=\"text-base text-ink-gray-6 font-medium\">\n        {{ __(title) }}\n      </p>\n    </div>\n    <p class=\"text-sm text-ink-gray-5\">\n      {{ __(description) }}\n    </p>\n  </div>\n</template>\n<script setup>\ndefineProps({\n  icon: {\n    type: Object,\n    default: null,\n  },\n  title: {\n    type: String,\n    default: \"Nothing here\",\n  },\n  description: {\n    type: String,\n    default: \"\",\n  },\n  button: {\n    type: Object,\n    required: false,\n  },\n})\n</script>\n","<template>\n  <svg\n    :height=\"radius * 2\"\n    :width=\"radius * 2\"\n  >\n    <circle\n      class=\"fill-transparent stroke-current\"\n      :class=\"secondaryClass\"\n      :cx=\"radius\"\n      :cy=\"radius\"\n      :r=\"normalizedRadius\"\n      :stroke-width=\"stroke\"\n      :stroke-dasharray=\"circumference\"\n    />\n    <circle\n      class=\"fill-transparent stroke-current origin-center -rotate-90 transition-all\"\n      :class=\"primaryClass\"\n      :cx=\"radius\"\n      :cy=\"radius\"\n      :r=\"normalizedRadius\"\n      :stroke-width=\"stroke\"\n      :stroke-dasharray=\"circumference\"\n      :stroke-dashoffset=\"strokeDashoffset\"\n    />\n  </svg>\n</template>\n<script>\nexport default {\n  name: \"ProgressRing\",\n  props: {\n    progress: {\n      type: Number,\n      required: true,\n    },\n    radius: {\n      type: Number,\n      default: 24,\n    },\n    stroke: {\n      type: Number,\n      default: 4,\n    },\n    primaryClass: {\n      type: String,\n      default: \"text-black\",\n    },\n    secondaryClass: {\n      type: String,\n      default: \"text-ink-gray-1\",\n    },\n  },\n  computed: {\n    normalizedRadius() {\n      return this.radius - this.stroke\n    },\n    circumference() {\n      return this.normalizedRadius * 2 * Math.PI\n    },\n    strokeDashoffset() {\n      return this.circumference - (this.progress / 100) * this.circumference\n    },\n  },\n}\n</script>\n","<template>\n  <div\n    class=\"text-ink-gray-8 flex flex-col items-start fixed bottom-0 right-0 m-5 w-96 z-1 rounded-2xl overflow-hidden shadow-2xl dark:border 500 bg-surface-white p-4\"\n  >\n    <div\n      class=\"flex items-center justify-between w-full pr-1.5\"\n      :class=\"[collapsed ? 'cursor-pointer' : 'mb-4']\"\n      @click=\"collapsed = false\"\n    >\n      <div\n        v-if=\"uploadsInProgress.length > 0\"\n        class=\"font-medium truncate text-lg\"\n      >\n        Uploading {{ uploadsInProgress.length }}\n        {{ uploadsInProgress.length == 1 ? \"file\" : \"files\" }}\n      </div>\n      <div\n        v-else-if=\"uploadsCompleted.length > 0\"\n        class=\"font-medium truncate text-lg\"\n      >\n        {{ uploadsCompleted.length }}\n        {{ uploadsCompleted.length == 1 ? \"file\" : \"files\" }} uploaded\n      </div>\n      <div\n        v-else-if=\"uploadsFailed.length > 0\"\n        class=\"font-medium truncate text-lg\"\n      >\n        {{ uploadsFailed.length }}\n        {{ uploadsFailed.length == 1 ? \"upload\" : \"uploads\" }} failed\n      </div>\n      <div class=\"ml-auto flex items-center gap-4\">\n        <button\n          class=\"focus:outline-none\"\n          @click.stop=\"collapsed = !collapsed\"\n        >\n          <component\n            :is=\"collapsed ? LucidePlus : LucideMinus\"\n            class=\"size-4 text-ink-gray-8\"\n          />\n        </button>\n        <button\n          class=\"focus:outline-none\"\n          @click=\"store.commit('clearUploads')\"\n        >\n          <LucideX class=\"size-4 text-ink-gray-8\" />\n        </button>\n      </div>\n    </div>\n    <div\n      v-if=\"!collapsed\"\n      class=\"max-h-64 overflow-y-auto bg-surface-white w-full\"\n    >\n      <div\n        v-for=\"(upload, index) in currentTabGetter()\"\n        :key=\"upload.uuid\"\n        class=\"cursor-pointer truncate hover:bg-surface-menu-bar rounded px-1 group\"\n        @mouseover=\"hoverIndex = index\"\n        @mouseout=\"hoverIndex = null\"\n      >\n        <div\n          class=\"flex items-center gap-3 py-1 pr-[3px]\"\n          @click=\"openFile(upload)\"\n        >\n          <div class=\"flex items-center justify-between w-full\">\n            <div class=\"flex justify-start items-center w-full max-w-[80%]\">\n              <LucideFile class=\"size-4 mr-2\" />\n              <p class=\"truncate text-sm leading-6 col-span-1 row-span-1\">\n                {{ upload.name }}\n              </p>\n            </div>\n            <Button\n              v-if=\"upload.completed\"\n              variant=\"ghost\"\n              :icon=\"upload.error ? LucideInfo : LucideFolderOpenDot\"\n            />\n            <ProgressRing\n              v-if=\"!upload.completed && !upload.error\"\n              :radius=\"13\"\n              :progress=\"Math.min(upload.progress, 98)\"\n            />\n            <Button\n              v-if=\"upload.error\"\n              variant=\"ghost\"\n              :icon=\"LucideRefreshCcw\"\n              class=\"rounded-full hover:bg-surface-gray-2\"\n              @click.stop=\"emitter.emit('retryUpload', upload.uuid)\"\n            />\n            <!-- <Button\n              variant=\"ghost\"\n              :icon=\"LucideX\"\n              class=\"rounded-full hover:bg-surface-red-4\"\n              @click=\"emitter.emit('cancelUpload', upload.uuid)\"\n            /> -->\n          </div>\n        </div>\n      </div>\n    </div>\n    <Dialog\n      v-if=\"showErrorDialog\"\n      v-model=\"showErrorDialog\"\n      :options=\"{\n        title: 'Upload failed',\n        message: selectedUpload.error,\n        size: 'sm',\n        actions: [\n          {\n            label: 'OK',\n            variant: 'solid',\n            onClick: () => {\n              showErrorDialog = false\n            },\n          },\n        ],\n      }\"\n    />\n  </div>\n</template>\n<script setup>\nimport { Dialog } from \"frappe-ui\"\nimport ProgressRing from \"@/components/ProgressRing.vue\"\nimport LucideInfo from \"~icons/lucide/info\"\nimport LucidePlus from \"~icons/lucide/plus\"\nimport LucideMinus from \"~icons/lucide/minus\"\nimport LucideFolderOpenDot from \"~icons/lucide/folder-open-dot\"\nimport LucideX from \"~icons/lucide/x\"\nimport LucideRefreshCcw from \"~icons/lucide/refresh-ccw\"\nimport { useStore } from \"vuex\"\nimport { useRouter } from \"vue-router\"\nimport { ref, computed } from \"vue\"\n\nconst collapsed = ref(false)\nconst showErrorDialog = ref(false)\nconst hoverIndex = ref(null)\nconst selectedUpload = ref(null)\n\nconst store = useStore()\nconst router = useRouter()\n\nconst currentTabGetter = () => {\n  return uploadsFailed.value.concat(\n    uploadsInProgress.value,\n    uploadsCompleted.value\n  )\n}\n\nconst mapGetters = () => {\n  return Object.fromEntries(\n    Object.keys(store.getters).map((getter) => [\n      getter,\n      computed(() => store.getters[getter]),\n    ])\n  )\n}\nconst { uploadsInProgress, uploadsCompleted, uploadsFailed } = mapGetters([\n  \"uploadsInProgress\",\n  \"uploadsCompleted\",\n  \"uploadsFailed\",\n])\n\nconst openFile = (upload) => {\n  selectedUpload.value = upload\n  if (upload.error) {\n    showErrorDialog.value = true\n  }\n  if (upload.completed && upload.response) {\n    router.push({\n      name: \"File\",\n      params: { entityName: upload.response.name },\n    })\n  }\n}\n</script>\n","<template>\n  <Navbar\n    v-if=\"!verify?.error && !getEntities.error\"\n    :root-resource=\"verify\"\n    :entities=\"activeEntity ? [activeEntity] : selectedEntitities\"\n  />\n\n  <ErrorPage\n    v-if=\"verify?.error || getEntities.error\"\n    :error=\"verify?.error || getEntities.error\"\n  />\n\n  <div\n    v-else\n    id=\"drop-area\"\n    ref=\"container\"\n    class=\"flex flex-col overflow-auto min-h-full bg-surface-white\"\n  >\n    <DriveToolBar\n      v-model:sort-order=\"sortOrder\"\n      v-model:search=\"search\"\n      v-model:filters=\"filters\"\n      v-model:team=\"team\"\n      :action-items=\"actionItems\"\n      :selections=\"selectedEntitities\"\n      :get-entities=\"getEntities || { data: [] }\"\n    />\n\n    <div\n      v-if=\"!props.getEntities.data\"\n      class=\"m-auto\"\n      style=\"transform: translate(0, -88.5px)\"\n    >\n      <LoadingIndicator class=\"size-5 text-ink-gray-9\" />\n    </div>\n    <NoFilesSection\n      v-else-if=\"!props.getEntities.data?.length\"\n      :icon=\"icon\"\n      v-bind=\"empty\"\n    />\n    <ListView\n      v-else-if=\"$store.state.view === 'list'\"\n      v-model=\"selections\"\n      :folder-contents=\"rows && grouper(rows)\"\n      :action-items=\"actionItems\"\n      :user-data=\"userData\"\n      :root-entity=\"verify?.data\"\n      @dropped=\"onDrop\"\n    />\n    <GridView\n      v-else\n      v-model=\"selections\"\n      :folder-contents=\"rows\"\n      :action-items=\"actionItems\"\n      :user-data=\"userData\"\n      @dropped=\"onDrop\"\n    />\n  </div>\n  <p\n    class=\"hidden absolute text-center top-1/2 left-[calc(50%-4rem)] w-32 z-10 font-bold\"\n  >\n    Drop to upload\n  </p>\n  <Transition\n    v-if=\"store.state.uploads.length > 0\"\n    enter-active-class=\"transition duration-[150ms] ease-[cubic-bezier(.21,1.02,.73,1)]\"\n    enter-from-class=\"translate-y-1 opacity-0\"\n    enter-to-class=\"translate-y-0 opacity-100\"\n    leave-active-class=\"transition duration-[150ms] ease-[cubic-bezier(.21,1.02,.73,1)]\"\n    leave-from-class=\"translate-y-0 opacity-100\"\n    leave-to-class=\"translate-y-1 opacity-0\"\n  >\n    <UploadTracker />\n  </Transition>\n</template>\n<script setup>\nimport ListView from \"@/components/ListView.vue\"\nimport GridView from \"@/components/GridView.vue\"\nimport DriveToolBar from \"@/components/DriveToolBar.vue\"\nimport Navbar from \"@/components/Navbar.vue\"\nimport NoFilesSection from \"@/components/NoFilesSection.vue\"\nimport UploadTracker from \"@/components/UploadTracker.vue\"\nimport ErrorPage from \"@/components/ErrorPage.vue\"\nimport { getLink, pasteObj } from \"@/utils/files\"\nimport { toggleFav, clearRecent } from \"@/resources/files\"\nimport { allUsers } from \"@/resources/permissions\"\nimport { entitiesDownload } from \"@/utils/download\"\nimport { ref, computed, watch, watchEffect, provide, inject } from \"vue\"\nimport { useRoute } from \"vue-router\"\nimport { useEventListener } from \"@vueuse/core\"\nimport { useStore } from \"vuex\"\nimport { openEntity } from \"@/utils/files\"\nimport { toast } from \"@/utils/toasts\"\nimport { move } from \"@/resources/files\"\nimport { LoadingIndicator } from \"frappe-ui\"\nimport { settings } from \"@/resources/permissions\"\nimport emitter from \"@/emitter\"\n\nimport LucideClock from \"~icons/lucide/clock\"\nimport LucideDownload from \"~icons/lucide/download\"\nimport LucideExternalLink from \"~icons/lucide/external-link\"\nimport LucideEye from \"~icons/lucide/eye\"\nimport LucideInfo from \"~icons/lucide/info\"\nimport LucideLink2 from \"~icons/lucide/link-2\"\nimport LucideArrowLeftRight from \"~icons/lucide/arrow-left-right\"\nimport LucideRotateCcw from \"~icons/lucide/rotate-ccw\"\nimport LucideShare2 from \"~icons/lucide/share-2\"\nimport LucideSquarePen from \"~icons/lucide/square-pen\"\nimport LucideStar from \"~icons/lucide/star\"\nimport LucideTrash from \"~icons/lucide/trash\"\nimport { prettyData, sortEntities } from \"@/utils/files\"\n\nconst props = defineProps({\n  grouper: { type: Function, default: (d) => d },\n  showSort: { type: Boolean, default: true },\n  verify: { type: Object, default: null },\n  icon: [Function, Object],\n  empty: Object,\n  getEntities: Object,\n})\nconst route = useRoute()\nconst store = useStore()\n\nconst dialog = ref(\"\")\nprovide(\"dialog\", dialog)\n\nconst team = ref(\n  [\"Shared\", \"Recents\", \"Favourites\", \"Trash\"].includes(route.name)\n    ? \"all\"\n    : route.params.team\n)\nwatch(\n  () => route.params.team,\n  (v) => {\n    if (v) team.value = v\n    allUsers.fetch({ team: v })\n  }\n)\nconst activeEntity = computed(() => store.state.activeEntity)\n\nconst sortId = computed(\n  () =>\n    props.getEntities.params?.entity_name || props.getEntities.params?.personal\n)\nconst sortOrder = ref(\n  store.state.sortOrder[sortId.value] || {\n    label: \"Modified\",\n    field: \"modified\",\n    ascending: false,\n  }\n)\nconst search = ref(\"\")\nconst filters = ref([])\n\nconst rows = ref(props.getEntities.data)\nwatch(sortId, (id) => {\n  if (store.state.sortOrder[id]) sortOrder.value = store.state.sortOrder[id]\n})\n\nwatch(\n  sortOrder,\n  (order) => {\n    rows.value = sortEntities([...rows.value], order)\n    props.getEntities.setData(rows.value)\n    if (sortId.value) {\n      store.commit(\"setSortOrder\", [sortId.value, order])\n    }\n  },\n  { deep: true }\n)\n\nwatch(search, (val) => {\n  const search = new RegExp(val, \"i\")\n  rows.value = props.getEntities.data.filter((k) => search.test(k.title))\n})\n\nwatch(\n  () => filters.value,\n  (val) => {\n    if (!val.length) {\n      rows.value = props.getEntities.data\n      return\n    }\n    const file_types = val.map((k) => k.name)\n    const isFolder = file_types.find((k) => k === \"Folder\")\n    rows.value = props.getEntities.data.filter(\n      ({ file_type, is_group }) =>\n        file_types.includes(file_type) || (isFolder && is_group)\n    )\n  },\n  { deep: true }\n)\n\nwatch(\n  () => props.getEntities.data,\n  (val) => {\n    if (!val) return\n    rows.value = sortEntities([...val], sortOrder.value)\n    store.commit(\"setCurrentFolder\", {\n      entities: rows.value.filter?.((k) => k.title[0] !== \".\"),\n    })\n  },\n  { immediate: true, deep: true }\n)\n\nstore.commit(\"setListResource\", props.getEntities)\nstore.commit(\"setCurrentResource\", null)\n\nconst selections = ref(new Set())\nconst selectedEntitities = computed(\n  () =>\n    props.getEntities.data?.filter?.(({ name }) =>\n      selections.value.has(name)\n    ) || []\n)\n\nconst verifyAccess = computed(() => props.verify?.data || !props.verify)\nwatchEffect(() => {\n  if (verifyAccess.value?.write) useEventListener(\"paste\", pasteObj)\n})\n\nconst refreshData = () => {\n  const params = { team: team.value === \"home\" ? \"\" : team.value || \"\" }\n  if (sortOrder.value)\n    params.order_by =\n      sortOrder.value.field + (sortOrder.value.ascending ? \" 1\" : \" 0\")\n  props.getEntities.fetch({ ...props.getEntities.params, ...params })\n}\n\nwatch(\n  [verifyAccess, team],\n  ([data]) => {\n    if (!data) return\n    refreshData()\n  },\n  { immediate: true, deep: false }\n)\nemitter.on(\"refresh\", refreshData)\n\nif (team.value && !allUsers.fetched && store.getters.isLoggedIn) {\n  allUsers.fetch({ team: team.value })\n}\nif (!settings.fetched && store.getters.isLoggedIn) settings.fetch()\n\n// Drag and drop\nconst onDrop = (targetFile, draggedItem) => {\n  if (!targetFile.is_group || draggedItem === targetFile.name || !draggedItem)\n    return\n  move.submit({\n    entity_names: [draggedItem],\n    new_parent: targetFile.name,\n  })\n  const removedIndex = props.getEntities.data.findIndex(\n    (k) => k.name === draggedItem\n  )\n  props.getEntities.data.splice(removedIndex, 1)\n  props.getEntities.data.find((k) => k.name === targetFile.name).children += 1\n  props.getEntities.setData(data)\n}\n\n// Action Items\nconst actionItems = computed(() => {\n  if (route.name === \"Trash\") {\n    return [\n      {\n        label: \"Restore\",\n        icon: LucideRotateCcw,\n        action: () => (dialog.value = \"restore\"),\n        multi: true,\n        important: true,\n      },\n      {\n        label: \"Delete forever\",\n        icon: LucideTrash,\n        action: () => (dialog.value = \"d\"),\n        isEnabled: () => route.name === \"Trash\",\n        multi: true,\n        danger: true,\n      },\n    ].filter((a) => !a.isEnabled || a.isEnabled())\n  } else {\n    return [\n      {\n        label: __(\"Preview\"),\n        icon: LucideEye,\n        action: ([entity]) => openEntity(entity),\n        isEnabled: (e) => !e.is_link,\n      },\n      {\n        label: __(\"Open\"),\n        icon: LucideExternalLink,\n        action: ([entity]) => openEntity(entity),\n        isEnabled: (e) => e.is_link,\n      },\n      { divider: true },\n      {\n        label: __(\"Share\"),\n        icon: LucideShare2,\n        action: () => (dialog.value = \"s\"),\n        isEnabled: (e) => e.share,\n        important: true,\n      },\n      {\n        label: __(\"Download\"),\n        icon: LucideDownload,\n        isEnabled: (e) =>\n          !e.is_link && e.mime_type !== \"frappe/slides\" && e.allow_download,\n        action: (entities) => entitiesDownload(team.value, entities),\n        multi: true,\n        important: true,\n      },\n      {\n        label: __(\"Copy Link\"),\n        icon: LucideLink2,\n        action: ([entity]) => getLink(entity),\n        important: true,\n      },\n      { divider: true, isEnabled: (e) => !e.external },\n      {\n        label: __(\"Move\"),\n        icon: LucideArrowLeftRight,\n        action: () => (dialog.value = \"m\"),\n        isEnabled: (e) => e.write,\n        multi: true,\n        important: true,\n      },\n      {\n        label: __(\"Rename\"),\n        icon: LucideSquarePen,\n        action: () => (dialog.value = \"rn\"),\n        isEnabled: (e) => e.write,\n      },\n      {\n        label: __(\"Show Info\"),\n        icon: LucideInfo,\n        action: () => (dialog.value = \"i\"),\n        isEnabled: (e) =>\n          !store.state.activeEntity || (!store.state.showInfo && !e.external),\n      },\n      {\n        label: __(\"Favourite\"),\n        icon: LucideStar,\n        action: (entities) => {\n          entities.forEach((e) => (e.is_favourite = true))\n          // Hack to cache\n          props.getEntities.setData(props.getEntities.data)\n          toggleFav.submit({ entities })\n        },\n        isEnabled: (e) => !e.is_favourite && !e.external,\n        important: true,\n        multi: true,\n      },\n      {\n        label: __(\"Unfavourite\"),\n        icon: LucideStar,\n        class: \"stroke-amber-500 fill-amber-500\",\n        action: (entities) => {\n          entities.forEach((e) => (e.is_favourite = false))\n          props.getEntities.setData(props.getEntities.data)\n          toggleFav.submit({ entities })\n        },\n        isEnabled: (e) => e.is_favourite && !e.external,\n        important: true,\n        multi: true,\n      },\n      {\n        label: __(\"Remove from Recents\"),\n        icon: LucideClock,\n        action: (entities) => {\n          clearRecent.submit({\n            entities,\n          })\n        },\n        isEnabled: () => route.name == \"Recents\",\n        important: true,\n        multi: true,\n      },\n      { divider: true, isEnabled: (e) => e.write },\n      {\n        label: __(\"Delete\"),\n        icon: LucideTrash,\n        action: () => (dialog.value = \"remove\"),\n        isEnabled: (e) => e.write,\n        important: true,\n        multi: true,\n        theme: \"red\",\n      },\n    ]\n  }\n})\n\nconst userData = computed(() =>\n  allUsers.data ? Object.fromEntries(allUsers.data.map((k) => [k.name, k])) : {}\n)\n\nasync function newLink() {\n  if (!document.hasFocus()) return\n  try {\n    const text = await navigator.clipboard.readText()\n    if (localStorage.getItem(\"prevClip\") === text) return\n    localStorage.setItem(\"prevClip\", text)\n    const url = new URL(text)\n    if (url.host)\n      toast({\n        title: \"Link detected\",\n        text,\n        buttons: [\n          {\n            label: \"Add\",\n            onClick: () => {\n              dialog.value = \"l\"\n            },\n          },\n        ],\n      })\n  } catch {}\n}\n\n// JS doesn't allow direct reading of clipboard\nif (settings.data?.auto_detect_links) {\n  newLink()\n  window.addEventListener(\"focus\", newLink)\n  window.addEventListener(\"copy\", newLink)\n}\n\nconst socket = inject(\"socket\")\nsocket.on(\"list-add\", ({ file }) => {\n  if (\n    file.parent_entity === props.getEntities.params.entity_name &&\n    !props.getEntities.data.find((k) => k.name === file.name)\n  ) {\n    props.getEntities.data.push(...prettyData([file]))\n    props.getEntities.setData(props.getEntities.data)\n  }\n})\nsocket.on(\"list-update\", ({ file }) => {\n  if (file.parent_entity !== props.getEntities.params.entity_name) return\n  const index = props.getEntities.data.findIndex((k) => k.name == file.name)\n  if (index !== -1)\n    props.getEntities.data.splice(index, 1, ...prettyData([file]))\n  props.getEntities.setData(props.getEntities.data)\n})\nsocket.on(\"list-remove\", ({ parent, entity_name }) => {\n  if (parent !== props.getEntities.params.entity_name) return\n  const index = props.getEntities.data.findIndex((k) => k.name == entity_name)\n  if (index !== -1) props.getEntities.data.splice(index, 1)\n  props.getEntities.setData(props.getEntities.data)\n})\nsocket.on(\"client-rename\", ({ entity_name, title }) => {\n  const file = props.getEntities.data.find((k) => k.name === entity_name)\n  file.title = title\n})\n</script>\n<style>\n.file-drag #drop-area {\n  opacity: 0.5;\n  padding-left: 0;\n  padding-right: 0;\n}\n\n.file-drag #drop-area + p {\n  display: block;\n}\n</style>\n"],"names":["canUseDOM","DisableScroll","e","keys","key","element","options","disableKeys","disableScroll","disableWheel","props","__props","contextMenu","ref","parentWidth","parentHeight","childWidth","childHeight","onMounted","calculateY","calculateX","onUpdated","onBeforeUnmount","_createElementBlock","_normalizeStyle","_openBlock","_Fragment","_renderList","item","index","_hoisted_2","_cache","_createElementVNode","_hoisted_3","_createBlock","_resolveDynamicComponent","_normalizeClass","_toDisplayString","src","imgLoaded","thumbnailLink","backupLink","_","_unref","ListRowItem","_withCtx","label","_component_Button","_createVNode","_component_LucideMoreHorizontal","$event","_isRef","$route","_component_LucideStar","draggedItem","route","useRoute","store","useStore","action","computed","settings","selectedName","open","row","openEntity","_mergeProps","_toHandlerKey","$emit","idx","column","CustomListRowItem","emit","__emit","container","useTemplateRef","selections","_useModel","selectedRow","rowEvent","formattedRows","k","g","selectedColumns","title","is_group","document","getThumbnailUrl","h","LucideGlobe2","LucideBuilding2","LucideUsers","Avatar","formatDate","n","setActive","entityName","entity","watch","dropdownActionItems","a","event","handleSelections","sels","onKeyDown","emitter","FrappeListView","ListHeader","group","ListGroupHeader","$slots","_renderSlot","_ctx","ListGroupRows","CustomListRow","p","ListEmptyState","_hoisted_1","LoadingIndicator","ContextMenu","is_image","getThumbnail","createResource","childrenSentence","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","getIconUrl","_hoisted_11","rows","file","_withModifiers","Button","GridItem","_component_ContextMenu","_directive_on_outside_click","sortOrder","search","team","activeFilters","disabled","viewState","val","shareView","searchInput","availableFilterTypes","types","r","b","orderByItems","columnHeaders","header","toggleAscending","defineComponent","Switch","__","TabButtons","TextInput","_component_LucideSearch","i","_hoisted_5","icon","name","LucideX","TeamSelector","Dropdown","LucideFilter","_component_LucideArrowDownAz","_component_LucideArrowUpZa","_hoisted_10","_component_LucideSparkles","_sfc_main","$props","$options","collapsed","showErrorDialog","hoverIndex","selectedUpload","router","useRouter","currentTabGetter","uploadsFailed","uploadsInProgress","uploadsCompleted","mapGetters","getter","openFile","upload","LucidePlus","LucideMinus","_component_LucideFile","LucideInfo","LucideFolderOpenDot","ProgressRing","LucideRefreshCcw","Dialog","dialog","provide","v","allUsers","activeEntity","sortId","filters","id","order","sortEntities","file_types","isFolder","file_type","selectedEntitities","verifyAccess","watchEffect","useEventListener","pasteObj","refreshData","params","data","onDrop","targetFile","move","removedIndex","actionItems","LucideRotateCcw","LucideTrash","LucideEye","LucideExternalLink","LucideShare2","LucideDownload","entities","entitiesDownload","LucideLink2","getLink","LucideArrowLeftRight","LucideSquarePen","LucideStar","toggleFav","LucideClock","clearRecent","userData","newLink","text","toast","socket","inject","prettyData","parent","entity_name","Navbar","ErrorPage","DriveToolBar","$store","ListView","GridView","NoFilesSection","_Transition","UploadTracker"],"mappings":"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"}